!function(e){var t,s,l=[],a=[],i={maxFiles:1,maxFileSize:10485760,allowedFileTypes:"",postUrl:"",useToastr:!1,useFontAwesome:!1,removeAllBtn:!0,settingsLabel:!0,toManyFilesMessage:"You can only attach 10 files",invalidFilesMessage:"These files do not meet the requirements!",successMessage:"Files Uploaded!",errorMessage:"Files not uploaded. There was an error please try again.",buttonText:"Attach Files",filesAdded:null,filesRemoved:null,beforeDataSend:null,sendSuccess:null,sendFailure:null,formId:"",debugButtonId:"jpfu_debugger",fileListId:"jpfu_filelist",fileInputId:"jpfu_fileinput",buttonListId:"jpfu_btns"},n={init:function(t){function s(e){var t;e.size>=1e4?(t=e.size/1024/1024,t=t.toFixed(2),t+="mb"):t=e.size+"kb",e.displaySize=t,e.name.match(i.allowedFileTypes)?(e.icon=c(e.name),e.size<=i.maxFileSize?(d(e),e.error?a.push(e):l.push(e)):(e.error="file size to large",a.push(e))):(e.error="wrong file type",a.push(e))}function r(t){var s="";o(),e("#jpfu_removeAll").length?e("#jpfu_removeAll").show():null,t.length>=i.maxFiles&&(t.splice(i.maxFiles,t.length-i.maxFiles),u(1)),e.each(t,function(e,t){s+=n.htmlFactory("File List Item",t,e)}),n.getVar("fl").html(s),e.isFunction(i.filesAdded)&&i.filesAdded.call(this)}function o(){n.getVar("fl").html("")}function c(e){if(!i.useFontAwesome)return e.type.match(/image.*/)?"<i class='glyphicon glyphicon-picture'></i>":"<i class='glyphicon glyphicon-file'></i>";var t=e.substr(e.indexOf(".")+1);switch(t){case"doc":case"docx":return"<i class='fa fa-file-word-o'></i>";case"pdf":return"<i class='fa fa-file-pdf-o'></i>";case"ppt":case"pptx":return"<i class='fa fa-file-powerpoint-o'></i>";case"xls":case"xlsx":return"<i class='fa fa-file-excel-o'></i>";case"zip":return"<i class='fa fa-file-archive-o'></i>";case"png":case"jpg":case"gif":case"jpeg":return"<i class='fa fa-file-image-o'></i>";default:return"<i class='fa fa-file-o'></i>"}}function u(e){switch(i.useToastr&&toastr.clear(),e){case 1:i.useToastr?toastr.info(i.toManyFilesMessage,"Wait"):n.getVar("fl").append(n.htmlFactory("Alert 1"));break;case 2:i.useToastr?toastr.error(n.htmlFactory("Invalid File List Toastr"),i.invalidFilesMessage):n.getVar("fl").append(n.htmlFactory("Alert 2"));break;case 3:i.useToastr?toastr.success("Debug Clicked. Check the Console log!"):n.getVar("fl").append(generateHTML("Alert 3"));case 4:i.useToastr?toastr.success(i.successMessage):alert(i.successMessage);case 5:i.useToastr?toastr.error(i.errorMessage):alert(i.errorMessage)}}function d(t){return l.length?e.each(l,function(e,s){return s.name===t.name?(t.error="Duplicate file",!1):void 0}):void 0}function p(){i.settingsLabel&&n.getVar("bl").append(n.htmlFactory("Settings Label")),i.removeAllBtn&&(n.getVar("bl").append(n.htmlFactory("Remove All")),e("#jpfu_removeAll").hide(),n.getVar("bl").on("click","#jpfu_removeAll",function(){return l=[],a=[],o(),n.getVar("fi").val(""),e.isFunction(i.filesRemoved)&&i.filesRemoved.call(this),e("#jpfu_removeAll").hide(),!1}))}t&&e.extend(i,t),window.jQuery?(e(this).html(n.htmlFactory("Init Plugin")),n.getVar("fi").on("change",function(){var t=e(this).prop("files");e.each(t,function(e,t){s(t)}),e(this).val(""),l.length?r(l):null,a.length?u(2):null,a=[]}),n.getVar("fl").on("click","button",function(){return l.splice(e(this).data("index"),1),o(),l.length?r(l):i.removeAllBtn?e("#jpfu_removeAll").hide():null,e.isFunction(i.filesRemoved)&&i.filesRemoved.call(this),!1}),p()):console.log("You must have jquery installed to use the jpFileUploader. You can get it here https://developers.google.com/speed/libraries/#jquery")},debugMe:function(){console.log("Debug On!");var e=window.navigator.userAgent,t=e.indexOf("MSIE "),a=e.indexOf("Edge");return t>0||a>0?"IE":(console.log(e),s=!0,n.getVar("bl").append(n.htmlFactory("Debug")),void n.getVar("bl").on("click","#"+i.debugButtonId,function(){return console.log(l),!1}))},getVar:function(t){switch(t){case"fl":return e("#"+i.fileListId);case"fi":return e("#"+i.fileInputId);case"bl":return e("#"+i.buttonListId);case"frm":return e("#"+i.formId);case"sub":return e("#"+i.submitButtonId);case"msimb":var s=i.maxFileSize/1024/1024;return s.toFixed(2);case"db":return e("#"+defualts.debugButtonId);default:console.log("jpfu - That is not a valid variable")}},htmlFactory:function(t,s,l){switch(t){case"Init Plugin":var r=i.useFontAwesome?"fa fa-plus":"glyphicon glyphicon-plus";return"<div class='row'><div id='"+i.buttonListId+"' class='col-xs-12 col-sm-12 col-md-12 col-lg-12 clearfix'><span class='btn btn-success btn-file' style=' position: relative; overflow: hidden;'><i class='"+r+"'></i>&nbsp;"+i.buttonText+"<input type='file' multiple class='form-control' id='"+i.fileInputId+"' style='position: absolute; top: 0; right: 0; min-width: 100%; min-height: 100%; font-size: 100px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; background: white; cursor: inherit; display: block;' /></span>&nbsp;</div></div><div class='row'><div style='padding-top: 10px' class='col-xs-12 col-sm-12 col-md-12 col-lg-12'><ul id='"+i.fileListId+"' class='list-group'></ul></div></div>";case"File List Item":var o=i.useFontAwesome?"fa fa-trash":"glyphicon glyphicon-trash";return"<li class='list-group-item clearfix hover'>"+s.icon+"&nbsp;"+s.name+"&nbsp;<em class='text-muted'><small>"+s.displaySize+"</small></em><button class='btn btn-danger btn-sm pull-right' data-index='"+l+"'><i class='"+o+"'></i>&nbsp;Delete</button></li>";case"Remove All":return i.useFontAwesome?"<button class='btn btn-warning pull-right' id='jpfu_removeAll'><i class='fa fa-warning'></i>&nbsp;Remove All</button>&nbsp;":"<button class='btn btn-warning pull-right' id='jpfu_removeAll'><i class='glyphicon glyphicon-warning-sign'></i>&nbsp;Remove All</button>&nbsp;";case"Debug":return i.useFontAwesome?"<button class='btn btn-info' id='"+i.debugButtonId+"' title='View File Array'><i class='fa fa-bug'></i></button>":"<button class='btn btn-info' id='jpfu_debugger'><i class='glyphicon glyphicon-fire'></i></button>";case"Settings Label":return"<span><em><small>Up to"+i.maxFiles+" files at "+n.getVar("msimb")+"mb or less each.</small><em></span>";case"Alert 1":return"<div class='alert alert-info alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button><strong>Wait!</strong>"+i.toManyFilesMessage+"</div>";case"Alert 2":var c="";return e.each(a,function(e,t){c=c+t.name+" - ["+t.error+"]<br />"}),"<div class='alert alert-danger alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button><strong>Nope</strong>&nbsp;"+i.invalidFilesMessage+"<br />"+c;case"Alert 3":return"<div class='alert alert-success alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button><strong>Debug Clicked</strong> Check the console log!</div>";case"Invalid File List Toastr":var u="";return e.each(a,function(e,t){u=e>0?u+t.name+" - [ "+t.error+" ]<br />":t.name+" - [ "+t.error+" ]<br />"}),u}},send:function(){var s=new FormData;e.each(l,function(e,t){s.append(t.name,t,t.name)});var a=n.getVar("frm").serializeArray();e.each(a,function(e,t){s.append(t.name,t.value)}),e.ajax({url:i.postUrl,data:s,cache:!1,contentType:!1,processData:!1,type:"POST",beforeSend:function(){e.isFunction(i.beforeDataSend)&&i.beforeDataSend.call(this)},success:function(){e.isFunction(i.sendSuccess)&&i.sendSuccess.call(this)},error:function(s,l,a){t=a,e.isFunction(i.sendFailure)&&i.sendFailure.call(this)}})},totalFiles:function(){return this.rv=l.length,this},sendStatus:function(){return this.rv=t,this}};e.fn.jpfu=function(t){var s=arguments,l=this,a=[{name:"debugMe",pub:!0},{name:"getVar",pub:!1},{name:"htmlFactory",pub:!1},{name:"send",pub:!0},{name:"totalFiles",pub:!0,returnVal:!0},{name:"sendStatus",pub:!0,returnVal:!0}],i=[];if(n[t])e.each(a,function(e,a){if([t]==a.name){if(a.pub)return a.returnVal?(i.push(n[t].apply(l,Array.prototype.slice.call(s,1))),i[0].rv):n[t].apply(l,Array.prototype.slice.call(s,1));console.log([t]+" is a private, keep out :)")}});else{if("object"==typeof n||!n)return n.init.apply(l,Array.prototype.slice.call(s,0));console.log(n+"  is something that jpFileUpload just doesn't do.")}}}(jQuery);